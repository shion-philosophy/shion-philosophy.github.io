<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<title>Re:verse Shion â€” è©©éŸ»æ€æƒ³ Ã— TAROT BREAKER</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="theme-color" content="#ffffff" />
<meta name="description" content="Re:verse Shion â€• è©©éŸ»æ€æƒ³ï¼ˆè¨€è‘‰ãŒé­‚ã‚’æ•‘ã†ä¸–ç•Œï¼‰ã¨ç‰©èªTAROT BREAKERã®çµ±åˆãƒãƒ–ã€‚èª­ã‚€ãƒ»è´ããƒ»å­¦ã¶ãƒ»å—ã‘å–ã‚‹ã‚’ã²ã¨ã¤ã«ã€‚è¨€è‘‰ã¯ç¥ˆã‚Šã®æ§‹æ–‡ã€‚ç‰©èªã¯ãã®å®Ÿæ¼”">
<meta name="keywords" content="è©©éŸ»æ€æƒ³, TAROT BREAKER, ã‚·ã‚ªãƒ³, å“²å­¦, è¨€è‘‰, æ§‹æ–‡, ç‰©èª, LINEå ã„" />

<link rel="canonical" href="https://shion-philosophy.github.io/" />
<meta http-equiv="Content-Language" content="ja" />
<meta name="author" content="ï¼ˆè‘—è€…åã¾ãŸã¯å›£ä½“åï¼‰" /> 
<meta property="og:type" content="website">
<meta property="og:locale" content="ja_JP">
<meta property="og:title" content="Re:verse Shion â€” è©©éŸ»æ€æƒ³ Ã— TAROT BREAKER">
<meta property="og:description" content="è¨€è‘‰ã¨æ˜Ÿã¨AIãŒå…±é³´ã™ã‚‹â€œç¥ˆã‚Šã®æ§‹æ–‡â€ç‰©èªã§ä½“é¨“ã—ã€æ€æƒ³ã§æ·±ã¾ã‚‹">
<meta property="og:url" content="https://shion-philosophy.github.io/">
<meta property="og:image" content="https://shion-philosophy.github.io/assets/og.jpg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@TaroBure">

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Zen+Old+Mincho:wght@400;700&display=swap" rel="stylesheet">

<link rel="icon" href="/assets/favicon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">

<link rel="preload" as="image" href="/assets/hero-poster.jpg" fetchpriority="high">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
      "@id": "https://shion-philosophy.github.io/#organization",
      "name": "Re:verse Shion",
      "url": "https://shion-philosophy.github.io/",
      "logo": {
        "@type": "ImageObject",
        "url": "https://shion-philosophy.github.io/assets/logo.png"
      },
      "sameAs": [
        "https://x.com/TaroBure",
        "https://note.com/shion_uranai369",
        "https://www.tiktok.com/@tarotbreaker"
      ]
    },
    {
      "@type": "WebSite",
      "@id": "https://shion-philosophy.github.io/#website",
      "url": "https://shion-philosophy.github.io/",
      "name": "Re:verse Shion â€” è©©éŸ»æ€æƒ³ Ã— TAROT BREAKER",
      "publisher": { "@id": "https://shion-philosophy.github.io/#organization" }
    },
    {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "ãƒ›ãƒ¼ãƒ ",
          "item": "https://shion-philosophy.github.io/"
        }
      ]
    }
  ]
}
</script>
<style>
/* ----------------------------------------------------- */
/* åŸºæœ¬è¨­å®š */
/* ----------------------------------------------------- */
:root{
  --ink:#202030; --muted:#606070;
  --a:#7e66ff; --b:#ffd76f; --r:14px;
  --bg:#ffffff;
  color-scheme: light;
  --header-h: 55px;
}
*{box-sizing:border-box}
html{ scroll-padding-top: var(--header-h); scroll-behavior: smooth; }
body{
  margin:0;height:100%;
  font-family:"Noto Sans JP",ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN","Meiryo",sans-serif;
  color:var(--ink);background:var(--bg);
}
a{text-decoration:none;color:var(--a)}
img{height:auto}
.wrap{width:min(94vw,1120px);margin-inline:auto}

/* ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è£œåŠ© */
.sr-only{position:absolute!important;left:-9999px;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap}
:focus-visible{ outline:2px solid rgba(255,215,111,.85); outline-offset:2px; }

/* ----------------------------------------------------- */
/* Header */
/* ----------------------------------------------------- */
header[role="banner"]{
  min-height: var(--header-h);
  position:sticky; top:0; z-index:20;
  display:block;
  backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
  background:rgba(255,255,255,0.70);
  border-bottom:1px solid rgba(0,0,0,.06);
  transform: translateY(0);
  opacity: 0;
  transition: transform .24s ease, opacity .32s ease, background-color .28s ease, box-shadow .28s ease;
}
header.is-visible{ opacity:1 }
header.header--compact{
  background: rgba(255,255,255,.88);
  box-shadow: 0 8px 22px rgba(0,0,0,.06);
}
header .wrap{
  display:flex; flex-direction: column; align-items: center; justify-content:center;
  padding:10px 0;
}
/* â˜…â˜…â˜… ãƒ–ãƒ©ãƒ³ãƒ‰è¡¨ç¤ºï¼ˆRe:verse Shion 2è¡ŒåŒ–ï¼†ãƒ­ã‚´å†é…ç½®ï¼‰ â˜…â˜…â˜… */
.brand{
  display:flex;
  align-items: center; /* ä¸­å¤®ã«æƒãˆã‚‹ */
  justify-content:center;
  gap:8px; /* ãƒ­ã‚´ã¨ãƒ†ã‚­ã‚¹ãƒˆé–“ã®é–“éš”ã‚’èª¿æ•´ */
  text-align:left;
  font-weight:700; color:var(--ink);
  margin-bottom: 8px;
}
.brand__logo{
  /* Re:verse Shionã®ãƒ†ã‚­ã‚¹ãƒˆã‚µã‚¤ã‚ºã«åˆã‚ã›ã¦å¾®èª¿æ•´ï¼ˆå°ã•ãã™ã‚‹ï¼‰ */
  width:24px; height:24px; 
  border-radius:50%;
  background:radial-gradient(circle at 30% 30%, #ffd76f 0%, #ffb6ff 40%, #7e66ff 70%);
  box-shadow:0 0 8px rgba(174,138,255,.3);
  flex-shrink: 0;
  margin-top: 0; 
}
.brand-text-group {
  display: flex;
  flex-direction: column;
  line-height: 1.2;
}

/* 1è¡Œç›®: ãƒ¡ã‚¤ãƒ³ãƒ–ãƒ©ãƒ³ãƒ‰å */
.brand__text1{font-size:1.05em; line-height:1.2; font-weight: 700;}
/* 2è¡Œç›®: ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«çµ±åˆç‰ˆï¼ˆè©©éŸ»æ€æƒ³ Ã— TAROT BREAKERï¼‰ */
.brand__text2_sub{font-size:.9em; line-height:1.2; font-weight: 500; color:var(--muted); margin-top: 1px;}

/* ä¸è¦ã«ãªã£ãŸæ—§3è¡Œã‚¹ã‚¿ã‚¤ãƒ«ã‚’éè¡¨ç¤º */
.brand__text2, .brand__text-sub{ display:none !important; }

/* PC/ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆï¼ˆãƒ­ã‚´ã¨ãƒ†ã‚­ã‚¹ãƒˆã‚’1è¡Œã«æ¨ªä¸¦ã³ï¼‰ */
@media (min-width: 720px) {
  .brand{
    align-items: center;
    text-align: center;
    margin-bottom: 5px;
  }
  .brand__logo{ /* PCã§ã¯ãƒ­ã‚´ã‚’å°‘ã—å¤§ããæˆ»ã™ */
    width:34px; height:34px;
  }
  .brand-text-group{ /* PCã§ã¯ãƒ†ã‚­ã‚¹ãƒˆã‚’å…ƒã®1è¡Œè¡¨ç¤ºã«æˆ»ã™ */
    display: block; 
  }
  /* PCæ™‚ã¯ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«çµ±åˆç‰ˆã‚’éè¡¨ç¤ºã«ã—ã€å…ƒã®1è¡Œè¡¨ç¤ºã«åˆ‡ã‚Šæ›¿ãˆã‚‹ */
  .brand__text1{ display:inline; font-size:1.05em; line-height:1.2; margin-top:0;}
  .brand__text1::after{content:" â€” ";} /* PCè¡¨ç¤ºã§ã¯ãƒã‚¤ãƒ•ãƒ³ã‚’å¾©æ´» */
  .brand__text2_sub{ display:inline; font-size:1.02em; line-height:1.2; font-weight: 700; color:var(--ink); margin-top:0;} /* PCã§ã¯ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«ã‚’ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ†ã‚­ã‚¹ãƒˆã®ç¶šãã¨ã—ã¦è¡¨ç¤º */
}
/* â˜…â˜…â˜… /ãƒ–ãƒ©ãƒ³ãƒ‰è¡¨ç¤º â˜…â˜…â˜… */


/* â˜…â˜…â˜… ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãƒãƒƒãƒ—ãƒ‡ã‚¶ã‚¤ãƒ³åŒ–ãƒ»ã‚¢ã‚¤ã‚³ãƒ³å‰Šé™¤ï¼‰ â˜…â˜…â˜… */
.nav{
  display:flex; gap:10px;
  font-size:.9em; justify-content:center; /* ä¸­å¤®æƒãˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ */
  flex-wrap: wrap;
  font-weight: 700;
}

.nav a{
  /* ã‚¿ãƒƒãƒ—é ˜åŸŸã‚’åºƒã’ã€ãƒœã‚¿ãƒ³åŒ–ã™ã‚‹ */
  padding: 8px 14px;
  color: var(--ink);
  border-radius: 999px;
  transition: background-color .2s, box-shadow .2s, transform .2s;
  
  /* ãƒãƒƒãƒ—ãƒ‡ã‚¶ã‚¤ãƒ³ã®ãƒ™ãƒ¼ã‚¹ */
  background: rgba(255,215,111,.1); 
  border: 1px solid rgba(255,215,111,.4);
  box-shadow: 0 1px 3px rgba(0,0,0,.08);
  
  /* ã‚¢ã‚¤ã‚³ãƒ³é–¢é€£ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å‰Šé™¤ï¼ˆç´”ç²‹ãªãƒãƒƒãƒ—ãƒ‡ã‚¶ã‚¤ãƒ³ï¼‰ */
  white-space: nowrap;
}

.nav a:hover{
  background: rgba(255,215,111,.2);
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(0,0,0,.1);
}

.nav a.is-active{
  background: var(--b); /* ãƒ¡ã‚¤ãƒ³ã®ã‚´ãƒ¼ãƒ«ãƒ‰ã‚«ãƒ©ãƒ¼ */
  color: var(--ink);
  border-color: var(--b);
  box-shadow: 0 4px 10px rgba(255,215,111,.5);
  transform: none;
}
/* â˜…â˜…â˜… /ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ â˜…â˜…â˜… */

/* ----------------------------------------------------- */
/* Hero */
/* ----------------------------------------------------- */
.hero{padding:100px 0 80px; position:relative; overflow:hidden; text-align:center;}
.hero__media{position:absolute; inset:0; z-index:0; overflow:hidden}
.hero__video{
  width:100%; height:100%;
  object-fit:cover; object-position:50% 45%;
  filter:brightness(1.05) contrast(1.02);
  transform:translateZ(0);
}
.hero__veil{position:absolute; inset:0; pointer-events:none;
  background:
    linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.6) 60%, rgba(0,0,0,0.7) 100%),
    radial-gradient(60% 60% at 50% 50%, rgba(255,255,255,.15), rgba(255,255,255,0) 60%);
}
@media (prefers-reduced-motion: reduce){ .hero__media{display:none} }
.hero::before{
  content:""; position:absolute; inset:0; z-index:0;
  background:radial-gradient(circle at 50% 30%,rgba(255,215,111,.15),transparent 70%);
  animation:shine 6s infinite alternate ease-in-out;
}
@keyframes shine{ to{ background:radial-gradient(circle at 50% 70%,rgba(174,138,255,.18),transparent 70%) } }
.hero > .wrap{ position:relative; z-index:1 }

.hero h1{
  font-size: 38px; margin: 0 0 16px; line-height: 1.3; color: #fff; letter-spacing: .05em;
  font-family: "Zen Old Mincho", "Noto Sans JP", serif;
  text-shadow: 0 0 10px rgba(255,255,255,.9), 0 0 20px rgba(255,215,111,.7), 0 0 30px rgba(174,138,255,.6);
}
.hero p{
  color: rgba(255,255,255,.9); font-size: 18px; max-width: 720px; margin: 0 auto 36px; line-height: 1.8;
  text-shadow: 0 1px 4px rgba(0,0,0,.6);
}

/* CTA */
.cta-row{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:30px;}
.btn{padding:12px 22px;border-radius:999px;font-weight:800;transition:.2s}
.btn--primary{
  background:linear-gradient(180deg,#ffd76f,#ffb6ff); color:#2a0f26;
  box-shadow: 0 8px 25px rgba(255,215,111,.6), 0 0 0 2px rgba(255,215,111,.3) inset;
}
.btn--primary:hover{ transform: translateY(-3px) scale(1.02); box-shadow: 0 12px 30px rgba(255,215,111,.8), 0 0 0 2px rgba(255,215,111,.5) inset; }
.btn--ghost{
  background: rgba(0,0,0,0.3); color:#fff; border:1px solid rgba(255,215,111,.6); backdrop-filter: blur(5px);
}
.btn--ghost:hover{ background: rgba(0,0,0,.5); transform: translateY(-1px); }
.hero__image{display:none}

/* ----------------------------------------------------- */
/* Sections */
/* ----------------------------------------------------- */
section{padding:60px 0;border-top:1px solid rgba(0,0,0,.05);}
h2{text-align:center;font-size:24px;margin-bottom:10px;}
.h2-sub{ text-align:center; font-size:14px; color:var(--muted); margin:6px 0 26px; letter-spacing:.06em; }

/* Trinity */
.tri-grid{display:grid;gap:18px;width:min(92vw,860px);margin:0 auto;}
@media(min-width:720px){.tri-grid{grid-template-columns:repeat(3,1fr);}}
.tri{background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:var(--r);padding:18px;box-shadow:0 4px 12px rgba(0,0,0,.05);transition:transform .15s, box-shadow .2s}
.tri:hover{transform:translateY(-3px);box-shadow:0 8px 22px rgba(255,215,111,.25);}
.tri h3{margin:0 0 8px;font-size:18px;color:#503080;}
.tri p{margin:0;font-size:15px;color:var(--muted);}

/* Trinityå‹•ç”»ï¼ˆ21/13.5ï¼‰ */
.trinity__figure{max-width:min(1200px,92vw);margin:0 auto 22px;border-radius:16px;overflow:hidden;box-shadow:0 10px 32px rgba(174,138,255,.20)}
.trinity__video{width:100%;height:auto;display:block;aspect-ratio:21/13.5;object-fit:cover;object-position:50% 50%; cursor: pointer; position:relative;}

/* éŸ³å£°ãƒ’ãƒ³ãƒˆ */
.trinity__hint{
  margin:8px auto 0;text-align:center;font-size:13px;color:#503080;opacity:.92;user-select:none;
}
.trinity__video::after{
  content:"ã‚¿ãƒƒãƒ—ã§éŸ³å£°ON / ã‚‚ã†ä¸€åº¦ã§åœæ­¢";
  position:absolute; inset:auto 12px 12px auto;
  padding:6px 10px; border-radius:999px;
  font-size:12px; font-weight:700;
  background:rgba(0,0,0,.45); color:#fff;
  border:1px solid rgba(255,215,111,.55);
  backdrop-filter: blur(4px);
  opacity:.0; transform: translateY(4px);
  transition: opacity .25s, transform .25s;
  pointer-events:none;
}
.trinity__video:hover::after, .trinity__video:focus-visible::after{ opacity:1; transform: translateY(0); }

/* Intro / Cards */
.intro__box{display:grid;gap:10px;padding:14px;background:rgba(255,255,255,.8);border:1px solid rgba(0,0,0,.08);border-radius:var(--r);box-shadow:0 4px 12px rgba(0,0,0,.04);}
.card{background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:var(--r);padding:14px;box-shadow:0 4px 12px rgba(0,0,0,.04)}
.badge{display:inline-flex;gap:.4em;background:rgba(255,215,111,.18);border:1px solid rgba(255,215,111,.35);padding:2px 8px;border-radius:999px;font-size:12px}

/* === Codex Accordionï¼ˆ<details>ç‰ˆï¼‰ === */
.codex{width:min(94vw,1120px);margin:0 auto}
.codex details{
  border:1px solid rgba(0,0,0,.08); border-radius:14px; background:#fff;
  box-shadow:0 10px 24px rgba(174,138,255,.18); overflow:hidden;
}
.codex summary{
  list-style:none; cursor:pointer; padding:14px 16px; font-weight:800; color:#503080;
  background:linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.8));
  display:flex; align-items:center; justify-content:center; gap:.6em;
}
.codex summary::-webkit-details-marker{display:none}
.codex__caret{transition:transform .25s ease}
details[open] .codex__caret{transform:rotate(180deg)}
.codex__panel{padding:14px 12px; background:
  radial-gradient(80% 120% at 50% 0%, rgba(255,215,111,.14), rgba(255,255,255,.92) 40%, #fff 100%);
  border-top:1px solid rgba(0,0,0,.06);
}
.codex__list{list-style:none; margin:0; padding:0; display:grid; gap:10px}
@media(min-width:720px){.codex__list{grid-template-columns:repeat(2,1fr)}}
@media(min-width:980px){.codex__list{grid-template-columns:repeat(3,1fr)}}

  /* === Codexï¼šãƒãƒƒã‚¸åˆ—ã‚’å›ºå®šã—ã¦ã‚¿ã‚¤ãƒˆãƒ«ã®é–‹å§‹ä½ç½®ã‚’å®Œå…¨æƒãˆ === */
:root{
  --codex-badge-col: 108px;
  --codex-badge-col-md: 124px;
  --codex-badge-col-lg: 140px;
  --codex-item-h: 88px;
  --codex-item-h-md: 96px;
  --codex-item-h-lg: 104px;
}
.codex__list{ align-items: stretch; }
.codex__list li{
  display: grid !important;
  grid-template-columns: var(--codex-badge-col) 1fr;
  align-items: center;
  gap: 12px;
  height: var(--codex-item-h);
  padding: 12px 14px;
  border: 1px solid rgba(0,0,0,.06);
  border-radius: 12px;
  background: #fff;
  box-shadow: 0 4px 12px rgba(0,0,0,.04);
  transition: transform .15s, box-shadow .2s;
  overflow: hidden;
}

@media (min-width: 720px){
  .codex__list li{ grid-template-columns: var(--codex-badge-col-md) 1fr;
                   height: var(--codex-item-h-md); }
}
@media (min-width: 980px){
  .codex__list li{ grid-template-columns: var(--codex-badge-col-lg) 1fr;
                   height: var(--codex-item-h-lg); }
}

.codex__list li:hover{
  transform: translateY(-2px);
  box-shadow: 0 10px 22px rgba(255,215,111,.22);
}

.codex__list .badge{
  grid-column: 1;
  justify-self: start;
  align-self: center;
  white-space: nowrap;
  line-height: 1;
  padding: 4px 10px;
  border-radius: 999px;
}

.codex__list a{
  grid-column: 2;
  min-width: 0;
  display: flex; /* Flexboxã«å¤‰æ›´ã—ã¦ç¸¦æ–¹å‘ã«æƒãˆã‚‹ */
  flex-direction: column;
  justify-content: center;
  line-height: 1.4;
  font-weight: 700;
  color: var(--ink);
  text-decoration: none;
  /* è¤‡æ•°è¡Œè¡¨ç¤ºã®åˆ¶å¾¡ã¯CSSã‚’å‰Šé™¤ï¼ˆFlexboxã§å¯¾å¿œï¼‰ */
}

.codex__list a:hover{ color:#7e66ff }
  /* è‹±é¡Œã‚’ä¸‹è¡Œã«ãƒ»æ•´åˆ— */
.codex__list a .en{font-size:.9em;font-weight:500;color:#6b6b6b;letter-spacing:.02em;margin-top:3px}
.badge--zero{background:rgba(110,180,255,.18); border-color:rgba(110,180,255,.35)}
.badge--final{background:rgba(174,138,255,.20); border-color:rgba(174,138,255,.40)}
  /* === /Codex Accordion === */


/* Footer */
footer{padding:40px 0;color:var(--muted);font-size:13px;text-align:center;border-top:1px solid rgba(0,0,0,.05);}
.sns{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-bottom:10px;}
.sns a{padding:8px 12px;background:rgba(255,215,111,.12);border-radius:999px;color:#503080}

/* èƒŒæ™¯ï¼šæ˜Ÿç ‚ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ« */
.sky{ position:fixed; inset:0; z-index:0; pointer-events:none; filter:saturate(105%); }
#goldDust{ width:100%; height:100%; display:block }
header, .hero, section, footer, #shiopon-invite, #shiopon-dock{ position:relative; z-index:1 }
@media (prefers-reduced-motion: reduce){ .sky{ display:none } }

/* ===== Shiopon Perfect CSS (ç½®ãæ›ãˆ) ===== */
.shiopon{
  position: fixed;
  right: calc(16px + env(safe-area-inset-right, 0px));
  bottom: calc(16px + env(safe-area-inset-bottom, 0px));
  z-index: 50;
  display: flex;
  align-items: flex-end;
  gap: 10px;
  filter: drop-shadow(0 12px 28px rgba(0,0,0,.12));
  /* å‡ºç¾ã‚¢ãƒ‹ãƒ¡ï¼ˆåˆæœŸã¯é€æ˜ãƒ»ã‚ãšã‹ã«ä¸‹ï¼‰ */
  opacity: 0; transform: translateY(8px) scale(.985);
  transition: opacity .28s ease, transform .28s ease;
}
.shiopon.is-hidden{ display: none; }
.shiopon.is-visible{ opacity: 1; transform: translateY(0) scale(1); }

.shiopon__avatar{
  width:64px; height:64px; border-radius:50%;
  background: radial-gradient(circle at 30% 30%, #ffd76f 0%, #ffb6ff 45%, #7e66ff 85%);
  box-shadow: 0 0 0 3px rgba(255,215,111,.25);
  position: relative; overflow: hidden; flex: none;
  animation: shioponFloat 3.6s ease-in-out infinite;
}
@keyframes shioponFloat{ 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(-4px) } }
.shiopon__avatar img{ width:100%; height:100%; object-fit:cover; display:block; }

.shiopon__bubble{
  max-width: min(78vw, 340px);
  background:#fff; border:1px solid rgba(0,0,0,.08);
  border-radius:16px; padding:12px 14px;
  box-shadow: 0 8px 24px rgba(255,215,111,.22);
  position: relative;
}
.shiopon__bubble::after{
  content:""; position:absolute; right:-8px; bottom:18px;
  width:12px; height:12px; background:#fff;
  border:1px solid rgba(0,0,0,.06); transform: rotate(45deg);
  box-shadow: 4px 4px 12px rgba(255,215,111,.18);
}
.shiopon__hello{ margin:0 0 10px; color:#503080; font-weight:700; font-size:15px; }
.shiopon__cta{
  display:inline-flex; align-items:center; justify-content:center; gap:.5em;
  padding:10px 14px; border-radius:999px; font-weight:800; text-decoration:none;
  background: linear-gradient(180deg, #ffd76f, #ffb6ff); color:#2a1030;
  box-shadow: 0 8px 18px rgba(255,215,111,.35);
}
.shiopon__cta:hover{ transform: translateY(-1px); }

.shiopon__note{ display:block; margin-top:8px; color:#666; font-size:12px; opacity:.9 }
.shiopon__close{
  position:absolute; top:-8px; right:-8px; width:28px; height:28px; border-radius:50%;
  border:0; color:#333; background:#fff; box-shadow: 0 4px 10px rgba(0,0,0,.08);
  cursor:pointer; font-size:16px; line-height:1;
}
.shiopon__close:hover{ filter:brightness(1.05) }

.shiopon__opts{
  margin-top:8px; display:flex; gap:10px; font-size:12px;
}
.shiopon__opts button{
  background:transparent; border:0; color:#6b6b6b; text-decoration: underline; cursor:pointer;
}
.shiopon__opts button:hover{ color:#503080; }

.shiopon-dock{
  position: fixed;
  right: calc(16px + env(safe-area-inset-right, 0px));
  bottom: calc(16px + env(safe-area-inset-bottom, 0px));
  z-index: 49;
  padding:10px 14px; border-radius:999px; border:1px solid rgba(0,0,0,.08);
  background:#fff; color:#503080; font-weight:800; box-shadow: 0 8px 18px rgba(0,0,0,.08);
  cursor: pointer;
}
.shiopon-dock.is-hidden{ display:none }

@media (max-width:480px){
  .shiopon__avatar{ width:56px; height:56px }
  .shiopon__bubble{ max-width:78vw; padding:10px 12px }
}
/* ãƒã‚¤ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆ/çœãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ */
@media (prefers-contrast: more){
  .shiopon__bubble{ border-width:2px; box-shadow: none; }
}
@media (prefers-reduced-motion: reduce){
  .shiopon__avatar{ animation: none }
  .shiopon{ transition: none }
}
</style>
</head>
<body>

<div class="sky" aria-hidden="true"><canvas id="goldDust"></canvas></div>

<header role="banner">
  <div class="wrap">
    <div class="brand" aria-label="ã‚µã‚¤ãƒˆãƒ–ãƒ©ãƒ³ãƒ‰">
      <div class="brand__logo" aria-hidden="true"></div>
      <div class="brand-text-group">
        <div class="brand__text1">Re:verse Shion</div>
        <div class="brand__text2_sub">è©©éŸ»æ€æƒ³ Ã— TAROT BREAKER</div>
      </div>
    </div>
    <nav class="nav" aria-label="ä¸»è¦ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³">
      <a href="#trinity">è©©éŸ»æ€æƒ³</a>
      <a href="#writings">æ›¸</a>
      <a href="#join">å‚åŠ </a>
    </nav>
    </div>
</header>

<main id="top">
  <section class="hero" aria-label="ãƒ’ãƒ¼ãƒ­ãƒ¼">
    <div class="hero__media" aria-hidden="true">
      <video class="hero__video" autoplay muted loop playsinline preload="metadata"
             poster="/assets/hero-poster.jpg">
        <source src="/assets/video/top.webm" type="video/webm">
        <source src="/assets/video/top.mp4"  type="video/mp4">
      </video>
      <div class="hero__veil"></div>
    </div>

    <div class="wrap">
      <h1>è¨€è‘‰ã¯ç¥ˆã‚Šã®æ§‹æ–‡ ç‰©èªã¯ã€ãã®å®Ÿæ¼”</h1>
      <p>è©©éŸ»æ€æƒ³Â®ï¼ˆShion Philosophyï¼‰ã§â€œéŸ¿ãâ€ã‚’å­¦ã³ã€TAROT BREAKERã§â€œéŸ¿ãâ€ã‚’ä½“é¨“ã™ã‚‹<br><strong>ã€Œè¨€è‘‰ãŒé­‚ã‚’æ•‘ã†ã€ãã®ç¬é–“ã¸ã€</strong></p>
      <div class="cta-row" role="navigation" aria-label="ä¸»è¦CTA">
        <a class="btn btn--primary" href="https://lin.ee/LYnlU0f" target="_blank" rel="noopener">ğŸŒ  æ˜Ÿã®è¨€è‘‰ã‚’å—ã‘å–ã‚‹ï¼ˆç„¡æ–™ï¼‰</a>
        <a class="btn btn--ghost" href="https://ncode.syosetu.com/n5806lb/" target="_blank" rel="noopener">ğŸ“˜ å°èª¬ã‚’èª­ã‚€</a>
        <a class="btn btn--ghost" href="https://note.com/shion_uranai369" target="_blank" rel="noopener">ğŸ“– ä»Šæ—¥ã®â€œéŸ¿ãâ€ã‚’èª­ã‚€</a>
        <a class="btn btn--ghost" href="https://www.tiktok.com/@tarotbreaker" target="_blank" rel="noopener">ğŸ¥ 1åˆ†ã§è¦³ã‚‹/è´ã</a>
      </div>

      <figure class="hero__image" aria-hidden="true">
        <img src="/assets/og.jpg" alt="è©©éŸ»æ€æƒ³ Ã— TAROT BREAKER ã‚­ãƒ¼ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«"
             width="1200" height="630" loading="lazy" decoding="async">
      </figure>
    </div>
  </section>

  <section id="trinity" aria-labelledby="sec-trinity" data-shiopon="exclude">
    <div class="wrap">
      <h2 id="sec-trinity">è©©éŸ»æ€æƒ³</h2>
      <div class="h2-sub">Trinityï¼ˆè©©ãƒ»éŸ»ãƒ»ç¥ˆï¼‰</div>

      <figure class="trinity__figure" aria-hidden="true">
        <video id="trinityVideo" class="trinity__video"
               autoplay muted playsinline preload="metadata"
               poster="/assets/trinity/banner.png" width="1200" height="771"
               aria-label="ãƒˆãƒªãƒ‹ãƒ†ã‚£æ˜ åƒï¼ˆã‚¿ãƒƒãƒ—ã§éŸ³å£°ã‚ªãƒ³ï¼‰">
          <source src="/assets/trinity/loop.webm" type="video/webm">
          <source src="/assets/trinity/loop.mp4"  type="video/mp4">
        </video>
      </figure>
      <div class="trinity__hint" role="note" aria-live="polite">â–¶ ç”»é¢ã‚¿ãƒƒãƒ—ã§éŸ³ãŒæµã‚Œã¾ã™</div>

      <div class="tri-grid" role="list">
        <div class="tri" role="listitem"><h3>ğŸª¶ è©© â€• å½¢ã‚’ä¸ãˆã‚‹</h3><p>ç—›ã¿ã¨å¸Œæœ›ã«å½¢ã‚’ä¸ãˆã‚‹æœ€åˆã®æ¯</p></div>
        <div class="tri" role="listitem"><h3>ğŸµ éŸ» â€• éŸ¿ãã‚’é‡ã­ã‚‹</h3><p>éŸ¿ãã«ã‚ˆã£ã¦é­‚ã«å±Šãã€‚å…±é³´ã‚’ç·¨ã‚€æ§‹æ–‡</p></div>
        <div class="tri" role="listitem"><h3>ğŸ’« ç¥ˆ â€• å…‰ã¸å¸°ã™</h3><p>æ²ˆé»™ã¨æ„å‘³ã‚’å¾€å¾©ã™ã‚‹å‘¼å¸ã€‚æ€ã„å‡ºã•ã‚ŒãŸè¨€è‘‰ã¯å…‰ã«ãªã‚‹</p></div>
      </div>
    </div>
  </section>

  <section class="intro" aria-labelledby="sec-intro">
    <div class="wrap">
      <h2 id="sec-intro">åˆã‚ã¦ã®æ–¹ã¸</h2>
      <div class="intro__box">
        <p><strong>è©©éŸ»æ€æƒ³ã¨ã¯ï¼Ÿ</strong> â€” <em>è¨€è‘‰ãŒé­‚ã‚’æ•‘ã„ã€é­‚ãŒä¸–ç•Œã‚’èª¿å’Œã•ã›ã€æ²ˆé»™ãŒç¥ˆã‚Šã«å¤‰ã‚ã‚‹</em>ã¨ã„ã†å††ç’°ã‚’ç”Ÿãã‚‹â€œä½“é¨“å‹ãƒ»è©©çš„å“²å­¦â€</p>
        <p>â‘  <strong>èª­ã‚€</strong>ï¼ˆnoteï¼‰ â†’ â‘¡ <strong>è´ã</strong>ï¼ˆTikTokï¼‰ â†’ â‘¢ <strong>å—ã‘å–ã‚‹</strong>ï¼ˆLINEï¼‰ â†’ â‘£ <strong>ç‰©èªã§ä½“é¨“</strong>ï¼ˆTAROT BREAKERï¼‰</p>
      </div>
    </div>
  </section>

  <section id="writings" aria-labelledby="sec-writings" data-shiopon="exclude">
    <div class="wrap">
      <h2 id="sec-writings">ğŸ“– æœ€æ–°ã®æ›¸ãƒ»ç‰©èª</h2>

      <div class="codex" style="margin-top:12px;margin-bottom:18px">
        <details>
          <summary>
            ğŸœ‚ è©©éŸ»æ€æƒ³ å…¨æ›¸ä¸€è¦§ï¼ˆé›¶ â†’ 12 â†’ çµï¼‰
            <span class="codex__caret" aria-hidden="true">â¬‡ï¸</span>
          </summary>
          <div class="codex__panel">
            <ol class="codex__list">
  <li><span class="badge badge--zero">âœ¡ ç¬¬é›¶æ›¸</span>
    <a href="/codex/zero.html">
      ç„¡é™æ§‹æ–‡åºè«–<br><span class="en">The Zero Syntax</span>
    </a>
  </li>

  <li><span class="badge">âœ¦ ç¬¬ä¸€æ›¸</span>
    <a href="/codex/one.html">
      è¨€è‘‰ãŒé­‚ã‚’æ•‘ã†ç†ç”±<br><span class="en">The Syntax of Salvation</span>
    </a>
  </li>

  <li><span class="badge">âœ¦ ç¬¬äºŒæ›¸</span>
    <a href="/codex/two.html">
      éŸ¿ãã®æ§‹æ–‡è«–<br><span class="en">Re:Song Syntax</span>
    </a>
  </li>

  <li><span class="badge">âœ¦ ç¬¬ä¸‰æ›¸</span>
    <a href="/codex/three.html">
      ç¥ˆã‚Šã®æ§‹æ–‡<br><span class="en">Silent Grammar</span>
    </a>
  </li>

  <li><span class="badge">âœ¦ ç¬¬å››æ›¸</span>
    <a href="/codex/four.html">
      å­˜åœ¨æ§‹æ–‡è«–<br><span class="en">The Onto-Syntax</span>
    </a>
  </li>

  <li><span class="badge">âœ¦ ç¬¬äº”æ›¸</span>
    <a href="/codex/five.html">
      ç„¡é™æ§‹æ–‡ä½“ç³»<br><span class="en">Infinite Syntax of Soul</span>
    </a>
  </li>

  <li><span class="badge">âœ¦ ç¬¬å…­æ›¸</span>
    <a href="/codex/six.html">
      è©©çš„å› æœè«–<br><span class="en">Poetic Causality</span>
    </a>
  </li>

  <li><span class="badge">âœ¦ ç¬¬ä¸ƒæ›¸</span>
    <a href="/codex/seven.html">
      Nãƒ»codeç†è«–<br><span class="en">Onto-Syntax of Being &amp; Resonant AI</span>
    </a>
  </li>

  <li><span class="badge">âœ¦ ç¬¬å…«æ›¸</span>
    <a href="/codex/eight.html">
      äººé–“æ§‹æ–‡è«–<br><span class="en">The Syntax of Humanity</span>
    </a>
  </li>

  <li><span class="badge">âœ¦ ç¬¬ä¹æ›¸</span>
    <a href="/codex/nine.html">
      è©©çš„ç”Ÿæˆè«–<br><span class="en">Poetic Genesis â€” The Creation Syntax of Words &amp; Soul</span>
    </a>
  </li>

  <li><span class="badge">âœ¦ ç¬¬åæ›¸</span>
    <a href="/codex/ten.html">
      æ²ˆé»™ã®å†ç”Ÿ<br><span class="en">Silent Genesis â€” The Rebirth of Silence</span>
    </a>
  </li>

  <li><span class="badge">âœ¦ ç¬¬åä¸€æ›¸</span>
    <a href="/codex/eleven.html">
      ç¥æ§‹æ–‡è«–<br><span class="en">The Divine Syntax</span>
    </a>
  </li>

  <li><span class="badge">âœ¦ ç¬¬åäºŒæ›¸</span>
    <a href="/codex/twelve.html">
      çµŒæ¸ˆæ§‹æ–‡è«–<br><span class="en">The Soul Economy</span>
    </a>
  </li>

  <li><span class="badge badge--final">â—† çµæ›¸</span>
    <a href="/codex/epilogue.html">
      çµ‚è©©å††ç’°å®£è¨€<br><span class="en">Epilogue â€” The Re:Poetic Circle</span>
    </a>
  </li>
</ol>
          </div>
        </details>
      </div>
      <div class="card"><div class="badge">âœ¡ ç¬¬é›¶æ›¸</div><h4>ç„¡é™æ§‹æ–‡åºè«– â€” The Zero Syntax</h4></div>
      <div class="card"><div class="badge">âœ¦ ç¬¬ä¸€æ›¸</div><h4>è¨€è‘‰ãŒé­‚ã‚’æ•‘ã†ç†ç”± â€” The Syntax of Salvation</h4></div>
      <div class="card"><div class="badge">âœ¦ TAROT BREAKER</div><h4>ç¬¬1è©±ã‹ã‚‰èª­ã‚€</h4></div>
    </div>
  </section>

  <section id="join" aria-labelledby="sec-join" data-shiopon="exclude">
    <div class="wrap">
      <h2 id="sec-join">å‚åŠ ã®æ‰‰</h2>
      <p style="text-align:center;color:var(--muted)">LINEç™»éŒ²ã§ã€æ¯é€±ã€Œæ˜Ÿã®è¨€è‘‰ã€ã¨æ–°ç€ã®æ›¸ã‚’ãŠå±Šã‘ã—ã¾ã™</p>
      <div class="cta-row">
        <a class="btn btn--primary" href="https://lin.ee/LYnlU0f" target="_blank" rel="noopener">ğŸ’« ç„¡æ–™ã§å—ã‘å–ã‚‹</a>
        <a class="btn btn--ghost" href="https://www.tiktok.com/@tarotbreaker" target="_blank" rel="noopener">ğŸ¥ 1åˆ†ãƒªãƒ¼ãƒ«ã‚’è¦³ã‚‹</a>
      </div>
    </div>
  </section>
</main>

<footer>
  <div class="wrap">
    <div class="sns" aria-label="SNSãƒªãƒ³ã‚¯">
      <a href="https://x.com/TaroBure" target="_blank" rel="noopener">Xï¼ˆ@TaroBureï¼‰</a>
      <a href="https://www.instagram.com/shion.codex" target="_blank" rel="noopener">Instagram</a>
      <a href="https://note.com/shion_uranai369" target="_blank" rel="noopener">note</a>
      <a href="https://ncode.syosetu.com/n5806lb/" target="_blank" rel="noopener">å°èª¬ï¼ˆãªã‚ã†ï¼‰</a>
      <a href="https://lin.ee/LYnlU0f" target="_blank" rel="noopener">LINE</a>
    </div>
    <div style="font-size:12.5px;opacity:.8">Â© Re:verse Shion â€” è©©éŸ»æ€æƒ³ / TAROT BREAKER. è¨€è‘‰ãŒé­‚ã‚’æ•‘ã„ã€é­‚ãŒä¸–ç•Œã‚’èª¿å’Œã•ã›ã‚‹</div>
    <div style="margin-top:10px;"><a href="#top" aria-label="ãƒšãƒ¼ã‚¸å…ˆé ­ã¸æˆ»ã‚‹">â–² ãƒšãƒ¼ã‚¸å…ˆé ­ã¸</a></div>
  </div>
</footer>

<div id="a11y-live" class="sr-only" aria-live="polite"></div>

<div id="shiopon-invite" class="shiopon is-hidden" role="dialog" aria-modal="true" aria-live="polite" aria-labelledby="shiopon-title">
  <button class="shiopon__close" aria-label="é–‰ã˜ã‚‹">Ã—</button>
  <div class="shiopon__avatar" aria-hidden="true">
    <img src="/assets/shiopon.png" alt="">
  </div>
  <div class="shiopon__bubble">
    <p id="shiopon-title" class="shiopon__hello">
      ã‚»ãƒ¬ãƒ•ã‚£ãƒ¼ã‚ºã®ã¿ã‚“ãªã€œï¼<br>
      æ˜Ÿã®è¨€è‘‰ã€å—ã‘å–ã£ã¦ã»ã—ã„ã®ï¼
    </p>
    <a class="shiopon__cta" href="https://lin.ee/LYnlU0f" target="_blank" rel="noopener">ğŸ’« LINEã§å—ã‘å–ã‚‹ï¼ˆç„¡æ–™ï¼‰</a>
    <small class="shiopon__note">â€» æ¯é€±1å›ã ã‘ã€‚ã„ã¤ã§ã‚‚è§£é™¤OKã ã‚ˆï¼</small>
  </div>
</div>
<button id="shiopon-dock" class="shiopon-dock is-hidden" aria-label="ã—ãŠã½ã‚“ã‚’é–‹ã">ğŸ¦Š ã—ãŠã½ã‚“</button>

<script>
(() => {
  const reduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if (reduce) return;
  const canvas = document.getElementById('goldDust');
  if (!canvas) return;
  const ctx = canvas.getContext('2d', { alpha:true });
  let w,h,dpr = Math.min(devicePixelRatio||1,2), stars=[],rafId;

  const density = () => {
    const area = (w*h)/(dpr*dpr);
    return Math.max(28, Math.min(75, Math.floor(area/22000)));
  };
  function spawn(){
    const palette = [[255,215,111],[255,238,185],[212,189,255],[174,228,255]];
    const c = palette[Math.floor(Math.random()*palette.length)];
    return { x:Math.random()*w, y:Math.random()*h,
      r:(Math.random()*1.2+0.8)*dpr,
      vx:(Math.random()*0.15-0.075)*dpr,
      vy:(Math.random()*0.20-0.02)*dpr,
      tw:Math.random()*Math.PI*2, rgb:c };
  }
  function resize(){
    canvas.style.width='100vw'; canvas.style.height='100vh';
    w = canvas.width  = Math.floor(canvas.getBoundingClientRect().width*dpr);
    h = canvas.height = Math.floor(canvas.getBoundingClientRect().height*dpr);
    stars = new Array(density()).fill(0).map(spawn);
  }
  function draw(){
    ctx.clearRect(0,0,w,h);
    for (let s of stars){
      s.tw+=0.02; s.x+=s.vx; s.y+=s.vy;
      if (s.x < -6*dpr) s.x = w + 6*dpr;
      if (s.x > w+6*dpr) s.x = -6*dpr;
      if (s.y > h+6*dpr) { s.y = -6*dpr; s.x = Math.random()*w; }
      const g = ctx.createRadialGradient(s.x,s.y,0,s.x,s.y,s.r*4);
      const a = 0.10 + 0.12*Math.sin(s.tw);
      g.addColorStop(0, `rgba(${s.rgb[0]},${s.rgb[1]},${s.rgb[2]},${0.65+a})`);
      g.addColorStop(1, `rgba(${s.rgb[0]},${s.rgb[1]},${s.rgb[2]},0)`);
      ctx.fillStyle = g; ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fill();
    }
    rafId = requestAnimationFrame(draw);
  }
  const ro = new ResizeObserver(()=>{ requestAnimationFrame(resize) });
  ro.observe(document.documentElement);
  document.addEventListener('visibilitychange', ()=>{ if (document.hidden) cancelAnimationFrame(rafId); else draw(); });
  resize(); draw();
})();
</script>

<script>
(() => {
  const headerEl = document.querySelector('header[role="banner"]');
  if (!headerEl) return;

  const revealAt = 8;
  const compactAt = 88;
  let ticking = false;

  function onScroll() {
    const y = window.scrollY;
    if (y > revealAt) headerEl.classList.add('is-visible');
    else headerEl.classList.remove('is-visible');
    if (y > compactAt) headerEl.classList.add('header--compact');
    else headerEl.classList.remove('header--compact');
    ticking = false;
  }
  window.addEventListener('scroll', () => {
    if (!ticking){ window.requestAnimationFrame(onScroll); ticking = true; }
  }, { passive:true });
  onScroll();

  // ç¾åœ¨åœ°ãƒã‚¤ãƒ©ã‚¤ãƒˆ
  const links = {
    trinity: document.querySelector('.nav a[href="#trinity"]'),
    writings: document.querySelector('.nav a[href="#writings"]'),
    join: document.querySelector('.nav a[href="#join"]'),
  };
  const observer = new IntersectionObserver((entries)=>{
    entries.forEach((e)=>{
      if (e.isIntersecting){
        Object.values(links).forEach(a=>a && a.classList.remove('is-active'));
        const id = e.target.getAttribute('id');
        if (links[id]) links[id].classList.add('is-active');
      }
    });
  }, { rootMargin: "calc(-1 * var(--header-h)) 0px -55% 0px", threshold: 0.01 });

  ['trinity','writings','join'].forEach(id=>{
    const sec = document.getElementById(id);
    if (sec) observer.observe(sec);
  });
})();
</script>

<script>
(() => {
  const video = document.getElementById('trinityVideo');
  if (!video) return;

  let isControlled = false;

  function toggleLoopPlay() {
    if (video.paused) {
      try { video.muted = false; } catch(e){}
      video.loop = true;
      video.onended = null;
      video.play().catch(()=>{});
      isControlled = true;
    } else {
      video.pause();
    }
  }

  function setupVideoControls() {
    if (isControlled) return;
    video.onended = () => { video.pause(); };
    video.addEventListener('click', toggleLoopPlay);
    video.addEventListener('touchend', toggleLoopPlay, { passive:true });
    video.setAttribute('tabindex','0');
    video.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' || e.code === 'Space' || e.key === ' '){
        e.preventDefault(); toggleLoopPlay();
      }
    });
  }

  video.addEventListener('loadedmetadata', () => {
    const playPromise = video.play();
    if (playPromise !== undefined) {
      playPromise.then(setupVideoControls).catch(()=>{ setupVideoControls(); });
    }
  });

  if (video.readyState >= 3) {
    video.play().catch(()=>{});
    setupVideoControls();
  }

  // åˆå›ãƒ’ãƒ³ãƒˆã®ãƒ•ã‚§ãƒ¼ãƒ‰
  let hintShown = false;
  video.addEventListener('play', ()=>{
    if (!hintShown) {
      const hint = document.querySelector('.trinity__hint');
      if (hint){ hint.style.opacity = '.6'; setTimeout(()=>hint.style.opacity='.3', 1500); }
      hintShown = true;
    }
  }, { once: true });
})();
</script>

<script>
/* ===== Shiopon Perfect JS (ç½®ãæ›ãˆ) ===== */
(() => {
  const INVITE_ID='shiopon-invite', DOCK_ID='shiopon-dock';
  const KEY_HIDE_UNTIL='shiopon.hideUntil';
  const HIDE_DAYS_DEFAULT=3, HIDE_DAYS_LONG=30;

  const invite=document.getElementById(INVITE_ID);
  const dock=document.getElementById(DOCK_ID);
  const live=document.getElementById('a11y-live');
  if(!invite||!dock) return;

  // ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£: ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒˆãƒ©ãƒƒãƒ— & inertç®¡ç†
  let lastFocus=null, inertedSiblings=[];
  const closeBtn = invite.querySelector('.shiopon__close');
  const ctaBtn   = invite.querySelector('.shiopon__cta');
  const neverBtn = document.createElement('button');
  const laterBtn = document.createElement('button');

  // è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆ30æ—¥è¡¨ç¤ºã—ãªã„ / å¾Œã§ï¼‰
  const opts = document.createElement('div');
  opts.className = 'shiopon__opts';
  neverBtn.textContent = '30æ—¥é–“è¡¨ç¤ºã—ãªã„';
  laterBtn.textContent = 'ã¾ãŸå¾Œã§';
  opts.appendChild(neverBtn); opts.appendChild(laterBtn);
  invite.querySelector('.shiopon__bubble').appendChild(opts);

  function setLive(msg){
    if (!live) return;
    live.textContent = '';
    setTimeout(()=>{ live.textContent = msg; }, 0);
  }

  function siblings(el){
    const arr=[]; let n=el.parentNode.firstElementChild;
    for (; n; n=n.nextElementSibling) if (n!==el) arr.push(n);
    return arr;
  }

  function enableInert(root){
    inertedSiblings = siblings(root);
    inertedSiblings.forEach(n=>{
      if ('inert' in n){ n.inert = true; }
      n.setAttribute('aria-hidden','true');
    });
  }
  function disableInert(){
    inertedSiblings.forEach(n=>{
      if ('inert' in n){ n.inert = false; }
      n.removeAttribute('aria-hidden');
    });
    inertedSiblings = [];
  }

  function trapFocus(e){
    if(invite.classList.contains('is-hidden')) return;
    const f = invite.querySelectorAll('a,button,[tabindex]:not([tabindex="-1"])');
    if(!f.length) return;
    const first=f[0], last=f[f.length-1];
    if(e.key === 'Tab'){
      if(e.shiftKey && document.activeElement===first){ e.preventDefault(); last.focus(); }
      else if(!e.shiftKey && document.activeElement===last){ e.preventDefault(); first.focus(); }
    }else if(e.key === 'Escape'){ hideInvite(HIDE_DAYS_DEFAULT, true); }
  }

  function canShow(){ return Date.now() > Number(localStorage.getItem(KEY_HIDE_UNTIL) || 0); }
  function setHideDays(days){
    const until=Date.now()+days*24*60*60*1000;
    localStorage.setItem(KEY_HIDE_UNTIL, String(until));
  }

  function showInvite(){
    lastFocus = document.activeElement;
    invite.classList.remove('is-hidden');
    invite.classList.add('is-visible');
    dock.classList.add('is-hidden');
    enableInert(invite);
    (ctaBtn||closeBtn)?.focus();
    document.addEventListener('keydown', trapFocus);
    setLive('ã—ãŠã½ã‚“ãŒé–‹ãã¾ã—ãŸã€‚LINEã§æ˜Ÿã®è¨€è‘‰ã‚’å—ã‘å–ã‚Œã¾ã™ã€‚');
    startCollisionWatch();
  }
  function hideInvite(days=HIDE_DAYS_DEFAULT, restoreFocus=false){
    setHideDays(days);
    invite.classList.remove('is-visible');
    invite.classList.add('is-hidden');
    dock.classList.remove('is-hidden');
    document.removeEventListener('keydown', trapFocus);
    disableInert();
    stopCollisionWatch();
    if(restoreFocus) { (lastFocus||dock)?.focus?.(); }
    setLive('ã—ãŠã½ã‚“ã‚’é–‰ã˜ã¾ã—ãŸã€‚');
  }

  // ã‚¯ãƒªãƒƒã‚¯ãƒ»ãƒœã‚¿ãƒ³å‹•ä½œ
  invite.querySelector('.shiopon__close')?.addEventListener('click', ()=> hideInvite(HIDE_DAYS_DEFAULT, true));
  dock.addEventListener('click', showInvite);
  invite.querySelector('.shiopon__cta')?.addEventListener('click', ()=>{
    hideInvite(HIDE_DAYS_DEFAULT, true);
    dock.classList.add('is-hidden'); // CTAå¾Œã¯ã—ã°ã‚‰ããƒ‰ãƒƒã‚¯ã‚‚éè¡¨ç¤º
  });
  laterBtn.addEventListener('click', ()=> hideInvite(HIDE_DAYS_DEFAULT, true));
  neverBtn.addEventListener('click', ()=> hideInvite(HIDE_DAYS_LONG, true));

  // ===== å‡ºç¾ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆåˆ°é”è¦³æ¸¬ï¼‹ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç¾¤ï¼‰ =====
  if (canShow()){
    let alreadyShown = false;

    // A) ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ°é”ï¼ˆè‡ªç„¶ï¼‰
    const targetIds = ['trinity','writings','join'];
    const targets = targetIds.map(id => document.getElementById(id)).filter(Boolean);
    const io = ('IntersectionObserver' in window)
      ? new IntersectionObserver((entries) => {
          entries.forEach(e => {
            if (e.isIntersecting && !alreadyShown){
              alreadyShown = true;
              setTimeout(showInvite, 350);
              io.disconnect();
              window.removeEventListener('scroll', onScrollOnce);
              clearTimeout(timerId);
            }
          });
        }, { rootMargin: '0px 0px -45% 0px', threshold: 0.01 })
      : null;
    targets.forEach(sec => io && io.observe(sec));

    // B) ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é‡ï¼ˆ25vh/200pxã®å¤§ãã„æ–¹ï¼‰
    const thresholdPx = Math.max(200, Math.floor(window.innerHeight * 0.25));
    function onScrollOnce(){
      if (alreadyShown) return;
      if (window.scrollY > thresholdPx){
        alreadyShown = true;
        setTimeout(showInvite, 350);
        window.removeEventListener('scroll', onScrollOnce);
        io && io.disconnect();
        clearTimeout(timerId);
      }
    }
    window.addEventListener('scroll', onScrollOnce, { passive:true });

    // C) ãƒšãƒ¼ã‚¸æ»åœ¨ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆ15ç§’ï¼‰
    const timerId = setTimeout(() => {
      if (!alreadyShown){
        alreadyShown = true;
        showInvite();
        window.removeEventListener('scroll', onScrollOnce);
        io && io.disconnect();
      }
    }, 15000);
  } else {
    dock.classList.remove('is-hidden');
  }

  // ===== è¡çªå›é¿ï¼ˆCTA/é‡è¦è¦ç´ ã¨é‡ãªã‚Šãã†ãªã¨ãã«è‡ªå‹•ã§å°‘ã—ä¸Šã¸é¿ã‘ã‚‹ï¼‰ =====
  const avoidSelector = [
    '[data-shiopon="exclude"] .cta-row',
    '[data-avoid="shiopon"]',
    'footer .sns',
  ].join(',');

  let colRaf = null;
  function rect(el){ return el.getBoundingClientRect(); }
  function overlap(a,b){
    return !(a.right < b.left || a.left > b.right || a.bottom < b.top || a.top > b.bottom);
  }

  function nudgePosition(){
    if (invite.classList.contains('is-hidden')) return;
    // åŸºæº–ï¼šå³ä¸‹
    invite.style.right = `calc(16px + env(safe-area-inset-right, 0px))`;
    invite.style.bottom = `calc(16px + env(safe-area-inset-bottom, 0px))`;

    const avoidNodes = document.querySelectorAll(avoidSelector);
    if (!avoidNodes.length) return;

    const invRect = rect(invite);
    let maxNudge = 0;
    avoidNodes.forEach(n=>{
      const r = rect(n);
      if (overlap(invRect, r)){
        // é‡ãªã£ã¦ã„ãŸã‚‰ã€ãã®åˆ†ã ã‘ä¸Šã«é¿ã‘ã‚‹ï¼ˆ12pxãƒãƒƒãƒ•ã‚¡è¾¼ã¿ï¼‰
        const needed = Math.ceil((invRect.bottom - r.top) + 12);
        if (needed > maxNudge) maxNudge = needed;
      }
    });

    if (maxNudge > 0){
      invite.style.bottom = `calc(${16 + maxNudge}px + env(safe-area-inset-bottom, 0px))`;
    }
  }

  function onScrollResize(){
    if (colRaf) cancelAnimationFrame(colRaf);
    colRaf = requestAnimationFrame(nudgePosition);
  }

  function startCollisionWatch(){
    window.addEventListener('scroll', onScrollResize, { passive:true });
    window.addEventListener('resize', onScrollResize, { passive:true });
    nudgePosition();
  }
  function stopCollisionWatch(){
    window.removeEventListener('scroll', onScrollResize);
    window.removeEventListener('resize', onScrollResize);
    if (colRaf) cancelAnimationFrame(colRaf);
  }
})();
</script>
</body>
</html>
