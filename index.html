<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<title>Re:verse Shion — 詩韻思想 × TAROT BREAKER</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="theme-color" content="#ffffff" />
<meta name="description" content="Re:verse Shion ― 詩韻思想（言葉が魂を救う世界）と物語TAROT BREAKERの統合ハブ。読む・聴く・学ぶ・受け取るをひとつに。言葉は祈りの構文。物語はその実演。">
<meta property="og:type" content="website">
<meta property="og:locale" content="ja_JP">
<meta property="og:title" content="Re:verse Shion — 詩韻思想 × TAROT BREAKER">
<meta property="og:description" content="言葉と星とAIが共鳴する“祈りの構文”。物語で体験し、思想で深まる。">
<meta property="og:url" content="https://shion-philosophy.github.io/">
<meta property="og:image" content="https://shion-philosophy.github.io/assets/og.jpg">
<style>
:root{
  --ink:#202030; --muted:#606070;
  --a:#7e66ff; --b:#ffd76f; --r:14px;
  --glow:0 0 25px rgba(255,215,111,.28);
  --bg:#ffffff;
}
/* Google Fontsの「Zen Old Mincho」を読み込みます (神秘的なフォントとして採用) */
@import url('https://fonts.googleapis.com/css2?family=Zen+Old+Mincho:wght@400;700&display=swap');

*{box-sizing:border-box}
html,body{margin:0;height:100%;font-family:"Noto Sans JP",ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN","Meiryo",sans-serif;color:var(--ink);background:var(--bg);scroll-behavior:smooth;}
a{text-decoration:none;color:var(--a)}
.wrap{width:min(94vw,1120px);margin-inline:auto}

/* ===== Header ===== */
header{
  position:sticky;top:0;backdrop-filter:blur(10px);
  background:rgba(255,255,255,0.85);border-bottom:1px solid rgba(0,0,0,.06);z-index:20;
}
header .wrap{
  display:flex;
  flex-direction: column; /* 縦並びにする */
  align-items: center; /* 中央揃え */
  justify-content:center; /* 中央揃え */
  padding:10px 0;
}
/* ★ 変更: ブランド名とナビゲーションの構造変更 */
.brand{
  display:block; /* Flexboxアイテムではなくブロック要素として扱う */
  text-align:center; /* テキスト中央揃え */
  font-weight:700;
  color:var(--ink);
  margin-bottom: 5px; /* ナビゲーションとの間に少しスペース */
}
.brand__logo{
  width:34px;height:34px;border-radius:50%;
  background:radial-gradient(circle at 30% 30%, #ffd76f 0%, #ffb6ff 40%, #7e66ff 70%);
  box-shadow:0 0 14px rgba(174,138,255,.4);
  display: inline-block; /* ロゴとテキストを同じ行に表示しないため */
  vertical-align: middle; /* ロゴの垂直位置を調整 */
  margin-right: 10px; /* ロゴとテキストの間にスペース */
}
.brand__text1 {
    font-size: 1.1em; /* 最初の行を少し大きく */
    font-weight: 700;
    line-height: 1.2;
}
.brand__text2 {
    font-size: 1em; /* 2行目を通常のサイズに */
    font-weight: 700;
    line-height: 1.2;
}

.nav {
  display: flex; /* ナビゲーションを横並びにする */
  gap: 15px; /* 間隔を広げる */
  font-size: 0.9em; /* 少し小さく */
}
.nav a{padding:6px 10px;color:var(--ink);border-radius:10px}
.nav a:hover{background:rgba(255,215,111,.12)}

/* ===== Hero - 神秘的なデザイン変更を適用 ===== */
.hero{padding:100px 0 80px; /* 上下のパディングを増やし、スペースを確保 */
  position:relative;overflow:hidden;text-align:center;}
/* ★ 追加：動画を背面に敷くレイヤー */
.hero__media{position:absolute;inset:0;z-index:0;overflow:hidden}
.hero__video{
  width:100%;height:100%;
  object-fit:cover;
  object-position:50% 45%;
  filter:brightness(1.05) contrast(1.02);
  transform:translateZ(0);
}
/* ★ 変更: 神秘的な雰囲気を出すためにヴェールのコントラストを強化 */
.hero__veil{position:absolute;inset:0;pointer-events:none;
  background:
    /* 上から下に濃くなるグラデーションを追加 */
    linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.6) 60%, rgba(0,0,0,0.7) 100%), /* 全体を暗めに調整 */
    /* 中央の明るさを残しつつ、神秘的な色合いを少し加える */
    radial-gradient(60% 60% at 50% 50%, rgba(255,255,255,.15), rgba(255,255,255,0) 60%);
  mix-blend-mode: normal; /* overlayからnormalに変更して、純粋なオーバーレイに */
  opacity: 1; /* 透明度を調整して、背景動画が適度に見えるように */
}
/* 省エネ・配慮：動きを避けたい人用 */
@media (prefers-reduced-motion: reduce){
  .hero__media{display:none}
}
/* 既存の放射演出はそのまま活かす（動画の上に薄く重なる） */
.hero::before{
  content:"";position:absolute;inset:0;z-index:0;
  background:radial-gradient(circle at 50% 30%,rgba(255,215,111,.15),transparent 70%);
  animation:shine 6s infinite alternate ease-in-out;
}
@keyframes shine{to{background:radial-gradient(circle at 50% 70%,rgba(174,138,255,.18),transparent 70%);}}
.hero > .wrap{position:relative;z-index:1}

/* ★ 変更: h1のフォント、色、影を神秘的に装飾し、視認性を向上 */
.hero h1{
  font-size: 38px;
  margin: 0 0 16px;
  line-height: 1.3;
  color: #fff; /* 白に変更してコントラストを強く */
  letter-spacing: 0.05em;
  font-family: "Zen Old Mincho", "Noto Sans JP", serif;
  /* 繊細な多層シャドウで光の表現 */
  text-shadow:
    0 0 10px rgba(255,255,255,0.9), /* よりはっきりした白い光 */
    0 0 20px rgba(255,215,111,0.7), /* 強いゴールドの輝き */
    0 0 30px rgba(174,138,255,0.6); /* 強いパープルの輝き */
}

/* ★ 変更: サブテキストの色とサイズ調整 */
.hero p{
  color: rgba(255,255,255,0.9); /* より白く、視認性を向上 */
  font-size: 18px;
  max-width: 720px;
  margin: 0 auto 36px;
  line-height: 1.8;
  text-shadow: 0 1px 4px rgba(0,0,0,0.6); /* より濃い影で読みやすく */
}

/* ★ 変更: CTAボタンの強化 */
.cta-row{display:flex;gap:12px;flex-wrap:wrap;justify-content:center; margin-top:30px;}
.btn{padding:12px 22px;border-radius:999px;font-weight:800;transition:.2s}
.btn--primary{
  background:linear-gradient(180deg,#ffd76f,#ffb6ff);
  color:#2a0f26;
  box-shadow:
    0 8px 25px rgba(255,215,111,.6),
    0 0 0 2px rgba(255,215,111,.3) inset;
}
.btn--primary:hover{
  transform: translateY(-3px) scale(1.02);
  box-shadow:
    0 12px 30px rgba(255,215,111,.8),
    0 0 0 2px rgba(255,215,111,.5) inset;
}
.btn--ghost{
  background: rgba(0,0,0,0.3); /* より濃い半透明の背景色に変更し、視認性を向上 */
  color: #fff; /* 白に変更 */
  border: 1px solid rgba(255,215,111,.6);
  backdrop-filter: blur(5px);
}
.btn--ghost:hover{
  background: rgba(0,0,0,0.5); /* ホバー時にもっと濃く */
  transform: translateY(-1px);
}

/* Hero image with prism overlay（既存） */
.hero__image{
  width:min(90vw,760px);margin:36px auto 0;position:relative;border-radius:18px;overflow:hidden;
  box-shadow:0 12px 36px rgba(174,138,255,.22), 0 0 0 1px rgba(0,0,0,.06) inset;
}
/* ★ 追加：動画がある場合はサブに回す（レイアウトは保持） */
.hero__image{display:none}
.hero__image img{width:100%;display:block;border-radius:18px;object-fit:cover;object-position:center;}
.hero__image .prism{
  position:absolute; inset:-25%; pointer-events:none; mix-blend-mode:screen;
  background:
    radial-gradient(120px 60px at 30% 40%, rgba(255,215,111,.28), transparent 60%),
    radial-gradient(160px 80px at 70% 60%, rgba(174,228,255,.28), transparent 60%),
    linear-gradient(105deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.22) 50%, rgba(255,255,255,0) 100%);
  filter: blur(12px) saturate(120%); animation: sweep 6s linear infinite; opacity:.55;
}
@keyframes sweep{
  0%{ transform: translateX(-30%) translateY(-10%) rotate(8deg) }
  50%{ transform: translateX(20%) translateY(10%) rotate(6deg) }
  100%{ transform: translateX(60%) translateY(-12%) rotate(10deg) }
}

/* ===== Sections ===== */
section{padding:60px 0;border-top:1px solid rgba(0,0,0,.05);}
h2{text-align:center;font-size:24px;margin-bottom:26px;}
.tri-grid{display:grid;gap:18px;width:min(92vw,860px);margin:0 auto;}
@media(min-width:720px){.tri-grid{grid-template-columns:repeat(3,1fr);}}
.tri{background:#fff;border:1px solid rgba(0,0,0,.08);
     border-radius:var(--r);padding:18px;box-shadow:0 4px 12px rgba(0,0,0,.05);transition:transform .15s, box-shadow .2s}
.tri:hover{transform:translateY(-3px);box-shadow:0 8px 22px rgba(255,215,111,.25);}
.tri h3{margin:0 0 8px;font-size:18px;color:#503080;}
.tri p{margin:0;font-size:15px;color:var(--muted);}

/* ★ 変更：トリニティの象徴映像の比率を21/13.5に設定（高さを50%増） */
.trinity__figure{max-width:min(1200px,92vw);margin:0 auto 22px;border-radius:16px;overflow:hidden;box-shadow:0 10px 32px rgba(174,138,255,.20)}
.trinity__video{width:100%;height:auto;display:block;aspect-ratio:21/13.5;object-fit:cover;object-position:50% 50%}
.trinity__img{width:100%;height:auto;display:block}

/* 既存 */
.intro__box{display:grid;gap:10px;padding:14px;background:rgba(255,255,255,.8);
  border:1px solid rgba(0,0,0,.08);border-radius:var(--r);box-shadow:0 4px 12px rgba(0,0,0,.04);}
.card{background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:var(--r);padding:14px;box-shadow:0 4px 12px rgba(0,0,0,.04)}
.badge{display:inline-flex;gap:.4em;background:rgba(255,215,111,.18);
  border:1px solid rgba(255,215,111,.35);padding:2px 8px;border-radius:999px;font-size:12px}

/* ===== Footer ===== */
footer{padding:40px 0;color:var(--muted);font-size:13px;text-align:center;border-top:1px solid rgba(0,0,0,.05);}
.sns{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-bottom:10px;}
.sns a{padding:8px 12px;background:rgba(255,215,111,.12);border-radius:999px;color:#503080}

/* ===== 背景：星砂パーティクル ===== */
.sky{
  position:fixed; inset:0; z-index:0; pointer-events:none;
  filter:saturate(105%);
}
#goldDust{ width:100%; height:100%; display:block }
header, .hero, section, footer, #shiopon-invite, #shiopon-dock{ position:relative; z-index:1 }
@media (prefers-reduced-motion: reduce){ .sky{ display:none } }

/* ===== しおぽん：LINE誘導フローティングUI ===== */
.shiopon{
  position:fixed; right:16px; bottom:16px; z-index:50;
  display:flex; align-items:flex-end; gap:10px;
  filter: drop-shadow(0 12px 28px rgba(0,0,0,.12));
}
.shiopon.is-hidden{ display:none; }
.shiopon__avatar{
  width:64px; height:64px; border-radius:50%;
  background: radial-gradient(circle at 30% 30%, #ffd76f 0%, #ffb6ff 45%, #7e66ff 85%);
  box-shadow: 0 0 0 3px rgba(255,215,111,.25);
  position:relative; overflow:hidden; flex:none;
  animation: shioponFloat 3.6s ease-in-out infinite;
}
.shiopon__avatar img{width:100%; height:100%; object-fit:cover; display:block;}
@keyframes shioponFloat{ 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(-4px) } }
.shiopon__bubble{
  max-width:min(78vw, 320px);
  background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:16px;padding:12px 14px;
  box-shadow: 0 8px 24px rgba(255,215,111,.22); position:relative;
}
.shiopon__bubble::after{
  content:""; position:absolute; right:-8px; bottom:18px;
  width:12px; height:12px; background:#fff; border:1px solid rgba(0,0,0,.06);
  transform: rotate(45deg); box-shadow: 4px 4px 12px rgba(255,215,111,.18);
}
.shiopon__hello{ margin:0 0 10px; color:#503080; font-weight:700; font-size:15px; }
.shiopon__cta{
  display:inline-flex; align-items:center; justify-content:center; gap:.5em;
  padding:10px 14px; border-radius:999px; font-weight:800; text-decoration:none;
  background: linear-gradient(180deg, #ffd76f, #ffb6ff);
  color:#2a1030; box-shadow: 0 8px 18px rgba(255,215,111,.35);
}
.shiopon__cta:hover{ transform: translateY(-1px); }
.shiopon__note{ display:block; margin-top:8px; color:#666; font-size:12px; opacity:.9 }
.shiopon__close{
  position:absolute; top:-8px; right:-8px;
  width:28px; height:28px; border-radius:50%; border:0; color:#333; background:#fff;
  box-shadow: 0 4px 10px rgba(0,0,0,.08); cursor:pointer; font-size:16px; line-height:1;
}
.shiopon__close:hover{ filter:brightness(1.05) }
.shiopon-dock{
  position:fixed; right:16px; bottom:16px; z-index:49;
  padding:10px 14px; border-radius:999px; border:1px solid rgba(0,0,0,.08);
  background:#fff; color:#503080; font-weight:800; box-shadow: 0 8px 18px rgba(0,0,0,.08); cursor:pointer;
}
.shiopon-dock.is-hidden{ display:none }
@media (max-width:480px){
  .shiopon__avatar{ width:56px; height:56px }
  .shiopon__bubble{ max-width:78vw; padding:10px 12px }
}
@media (prefers-reduced-motion: reduce){ .shiopon__avatar{ animation:none } }
</style>
</head>
<body>

<div class="sky" aria-hidden="true"><canvas id="goldDust"></canvas></div>

<header>
  <div class="wrap">
    <div class="brand"> <div class="brand__logo" aria-hidden="true"></div>
      <div class="brand__text1">Re:verse Shion —</div>
      <div class="brand__text2">詩韻思想 × TAROT BREAKER</div>
    </div>
    <nav class="nav" aria-label="主要ナビゲーション">
      <a href="#trinity">詩韻思想</a>
      <a href="#writings">書</a>
      <a href="#join">参加</a>
    </nav>
  </div>
</header>

<main>
  <section class="hero" aria-label="ヒーロー">
    <div class="hero__media" aria-hidden="true">
      <video class="hero__video" autoplay muted loop playsinline preload="metadata"
             poster="/assets/hero-poster.jpg">
        <source src="/assets/video/top.webm" type="video/webm">
        <source src="/assets/video/top.mp4"  type="video/mp4">
      </video>
      <div class="hero__veil"></div>
    </div>

    <div class="wrap">
      <h1>言葉は祈りの構文。物語は、その実演</h1>
      <p>詩韻思想®（Shion Philosophy）で“響き”を学び、TAROT BREAKERで“響き”を体験する<br><strong>「言葉が魂を救う、その瞬間へ」</strong></p>
      <div class="cta-row">
        <a class="btn btn--primary" href="https://lin.ee/LYnlU0f" target="_blank" rel="noopener">🌠 星の言葉を受け取る（無料）</a>
        <a class="btn btn--ghost" href="https://ncode.syosetu.com/n5806lb/" target="_blank" rel="noopener">📘 小説を読む</a>
        <a class="btn btn--ghost" href="https://note.com/shion_uranai369" target="_blank" rel="noopener">📖 今日の“響き”を読む</a>
        <a class="btn btn--ghost" href="https://www.tiktok.com/@tarotbreaker" target="_blank" rel="noopener">🎥 1分で観る/聴く</a>
      </div>

      <figure class="hero__image" aria-hidden="true">
        <img src="/assets/og.jpg" alt="詩韻思想 × TAROT BREAKER キービジュアル" loading="eager" decoding="async">
        <span class="prism"></span>
      </figure>
    </div>
  </section>

  <section id="trinity" aria-labelledby="sec-trinity">
    <div class="wrap">
      <h2 id="sec-trinity">詩韻思想 ― 三位一体（詩・韻・祈）</h2>

      <figure class="trinity__figure" aria-hidden="true">
        <video class="trinity__video" autoplay muted loop playsinline preload="metadata"
               poster="/assets/trinity/banner.png">
          <source src="/assets/trinity/loop.webm" type="video/webm">
          <source src="/assets/trinity/loop.mp4"  type="video/mp4">
        </video>
        </figure>

      <div class="tri-grid">
        <div class="tri"><h3>🪶 詩 ― 形を与える</h3><p>痛みと希望に形を与える最初の息</p></div>
        <div class="tri"><h3>🎵 韻 ― 響きを重ねる</h3><p>響きによって魂に届く。共鳴を編む構文</p></div>
        <div class="tri"><h3>💫 祈 ― 光へ帰す</h3><p>沈黙と意味を往復する呼吸。思い出された言葉は光になる</p></div>
      </div>
    </div>
  </section>

  <section class="intro" aria-labelledby="sec-intro">
    <div class="wrap">
      <h2 id="sec-intro">初めての方へ</h2>
      <div class="intro__box">
        <p><strong>詩韻思想とは？</strong> ― <em>言葉が魂を救い、魂が世界を調和させ、沈黙が祈りに変わる</em>という円環を生きる“体験型・詩的哲学”</p>
        <p>① <strong>読む</strong>（note） → ② <strong>聴く</strong>（TikTok） → ③ <strong>受け取る</strong>（LINE） → ④ <strong>物語で体験</strong>（TAROT BREAKER）</p>
      </div>
    </div>
  </section>

  <section id="writings" aria-labelledby="sec-writings">
    <div class="wrap">
      <h2 id="sec-writings">📖 最新の書・物語</h2>
      <div class="card"><div class="badge">✡ 第零書</div><h4>無限構文序論 — The Zero Syntax</h4></div>
      <div class="card"><div class="badge">✦ 第一書</div><h4>言葉が魂を救う理由 — The Syntax of Salvation</h4></div>
      <div class="card"><div class="badge">✦ TAROT BREAKER</div><h4>第1話から読む</h4></div>
    </div>
  </section>

  <section id="join" aria-labelledby="sec-join">
    <div class="wrap">
      <h2 id="sec-join">参加の扉</h2>
      <p style="text-align:center;color:var(--muted)">LINE登録で、毎週「星の言葉」と新着の書をお届けします</p>
      <div class="cta-row">
        <a class="btn btn--primary" href="https://lin.ee/LYnlU0f" target="_blank" rel="noopener">💫 無料で受け取る</a>
        <a class="btn btn--ghost" href="https://www.tiktok.com/@tarotbreaker" target="_blank" rel="noopener">🎥 1分リールを観る</a>
      </div>
    </div>
  </section>
</main>

<footer>
  <div class="wrap">
    <div class="sns" aria-label="SNSリンク">
      <a href="https://x.com/TaroBure" target="_blank" rel="noopener">X（@TaroBure）</a>
      <a href="https://www.instagram.com/shion.codex" target="_blank" rel="noopener">Instagram</a>
      <a href="https://note.com/shion_uranai369" target="_blank" rel="noopener">note</a>
      <a href="https://ncode.syosetu.com/n5806lb/" target="_blank" rel="noopener">小説（なろう）</a>
      <a href="https://lin.ee/LYnlU0f" target="_blank" rel="noopener">LINE</a>
    </div>
    <div style="font-size:12.5px;opacity:.8">© Re:verse Shion — 詩韻思想 / TAROT BREAKER. 言葉が魂を救い、魂が世界を調和させる</div>
  </div>
</footer>

<div id="shiopon-invite" class="shiopon is-hidden" role="dialog" aria-live="polite" aria-label="しおぽんからのお知らせ">
  <button class="shiopon__close" aria-label="閉じる">×</button>
  <div class="shiopon__avatar" aria-hidden="true">
    <img src="/assets/shiopon.png" alt="">
  </div>
  <div class="shiopon__bubble">
    <p class="shiopon__hello">シオン〜！星の言葉、受け取ってほしいの！</p>
    <a class="shiopon__cta" href="https://lin.ee/LYnlU0f" target="_blank" rel="noopener">💫 LINEで受け取る（無料）</a>
    <small class="shiopon__note">※ 毎週1回だけ。いつでも解除OKだよ！</small>
  </div>
</div>
<button id="shiopon-dock" class="shiopon-dock is-hidden" aria-label="しおぽんを開く">🦊 しおぽん</button>

<script>
(() => {
  const reduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if (reduce) return;
  const canvas = document.getElementById('goldDust');
  if (!canvas) return;
  const ctx = canvas.getContext('2d', { alpha:true });
  let w,h,dpr = Math.min(devicePixelRatio||1,2), stars=[],rafId;

  const density = () => {
    const area = (w*h)/(dpr*dpr);
    return Math.max(28, Math.min(75, Math.floor(area/22000)));
  };
  function spawn(){
    const palette = [
      [255,215,111],[255,238,185],[212,189,255],[174,228,255]
    ];
    const c = palette[Math.floor(Math.random()*palette.length)];
    return {
      x: Math.random()*w, y: Math.random()*h,
      r: (Math.random()*1.2 + 0.8)*dpr,
      vx: (Math.random()*0.15 - 0.075)*dpr,
      vy: (Math.random()*0.20 - 0.02)*dpr,
      tw: Math.random()*Math.PI*2, rgb:c
    };
  }
  function resize(){
    canvas.style.width = '100vw'; canvas.style.height = '100vh';
    w = canvas.width = Math.floor((canvas.getBoundingClientRect().width)*dpr);
    h = canvas.height= Math.floor((canvas.getBoundingClientRect().height)*dpr);
    stars = new Array(density()).fill(0).map(spawn);
  }
  function draw(){
    ctx.clearRect(0,0,w,h);
    for (let s of stars){
      s.tw += 0.02; s.x += s.vx; s.y += s.vy;
      if (s.x < -6*dpr) s.x = w + 6*dpr;
      if (s.x > w+6*dpr) s.x = -6*dpr;
      if (s.y > h+6*dpr) { s.y = -6*dpr; s.x = Math.random()*w; }
      const g = ctx.createRadialGradient(s.x,s.y,0,s.x,s.y,s.r*4);
      const a = 0.10 + 0.12*Math.sin(s.tw);
      g.addColorStop(0, `rgba(${s.rgb[0]},${s.rgb[1]},${s.rgb[2]},${0.65+a})`);
      g.addColorStop(1, `rgba(${s.rgb[0]},${s.rgb[1]},${s.rgb[2]},0)`);
      ctx.fillStyle = g; ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fill();
    }
    rafId = requestAnimationFrame(draw);
  }
  const ro = new ResizeObserver(()=>{ requestAnimationFrame(resize) });
  ro.observe(document.documentElement);
  document.addEventListener('visibilitychange', ()=>{ if (document.hidden) cancelAnimationFrame(rafId); else draw(); });
  resize(); draw();
})();
</script>

<script>
(() => {
  const INVITE_ID='shiopon-invite', DOCK_ID='shiopon-dock';
  const KEY_HIDE_UNTIL='shiopon.hideUntil', HIDE_DAYS=3;
  const invite=document.getElementById(INVITE_ID);
  const dock=document.getElementById(DOCK_ID);
  if(!invite||!dock) return;

  function showInvite(){ invite.classList.remove('is-hidden'); dock.classList.add('is-hidden'); }
  function hideInvite(days=HIDE_DAYS){
    const until=Date.now()+days*24*60*60*1000;
    localStorage.setItem(KEY_HIDE_UNTIL, String(until));
    invite.classList.add('is-hidden'); dock.classList.remove('is-hidden');
  }
  function canShow(){ return Date.now() > Number(localStorage.getItem(KEY_HIDE_UNTIL) || 0); }

  if (canShow()){
    setTimeout(()=>{ if (window.innerHeight>640 && window.scrollY<80) showInvite(); }, 4000);
    let shown=false;
    const onScroll=()=>{ if(!shown && window.innerHeight>640 && window.scrollY<80){ showInvite(); shown=true; window.removeEventListener('scroll',onScroll); } };
    window.addEventListener('scroll', onScroll, { passive:true });
  }else{
    dock.classList.remove('is-hidden');
  }

  invite.querySelector('.shiopon__close')?.addEventListener('click', ()=> hideInvite(HIDE_DAYS));
  dock.addEventListener('click', showInvite);
  invite.querySelector('.shiopon__cta')?.addEventListener('click', ()=>{
    hideInvite(HIDE_DAYS);
    dock.classList.add('is-hidden');
  });
})();
</script>

</body>
</html>
