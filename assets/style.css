/* ========== Global ========== */
:root{
  --bg:#0b0b1a; --ink:#e8ecff; --muted:#a9b3d9;
  --accent:#8fb7ff; --gold:#ffd76f;
  --ok:#a6f0c6; --warn:#ffd4a1;
  --radius:18px; --shadow:0 20px 40px rgba(0,0,20,.35);
  --maxw:1100px; --bp:860px;
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  color:var(--ink);
  background:
    radial-gradient(70% 60% at 50% 0%, #181d3b 0%, var(--bg) 70%),
    radial-gradient(120% 80% at 50% 120%, #070a18 10%, #000 90%);
  font-family:'Noto Sans JP', system-ui, -apple-system, "Hiragino Sans", "Yu Gothic", sans-serif;
  line-height:1.9; overflow-x:hidden;
}

/* 星屑（CSSのみ） */
body::before, body::after{
  content:""; position:fixed; inset:0; pointer-events:none; background-repeat:repeat;
}
body::before{
  background:
    radial-gradient(1px 1px at 10% 20%, #fff4 0%, transparent 55%),
    radial-gradient(1px 1px at 80% 30%, #fff8 0%, transparent 55%),
    radial-gradient(1px 1px at 30% 80%, #fff6 0%, transparent 55%),
    radial-gradient(1px 1px at 60% 60%, #fff5 0%, transparent 55%);
  opacity:.7; animation:stars1 60s linear infinite; background-size:320px 320px;
}
body::after{
  background:
    radial-gradient(1px 1px at 20% 70%, #fff6 0%, transparent 50%),
    radial-gradient(1px 1px at 70% 90%, #fff8 0%, transparent 50%);
  opacity:.4; animation:stars2 80s linear infinite reverse; background-size:420px 420px;
}
@keyframes stars1{to{transform:translate(-120px,100px)}}
@keyframes stars2{to{transform:translate(120px,-120px)}}

.main{max-width:var(--maxw); margin:0 auto; padding:clamp(28px,5vw,64px) 20px 90px; position:relative}

/* 流星（右上→左下） */
.meteor{
  position:absolute;width:180px;height:2px;
  background:linear-gradient(270deg,var(--gold),transparent);
  filter:drop-shadow(0 0 10px var(--gold));opacity:0;pointer-events:none;
  animation:meteor 7s ease-in-out infinite;will-change:transform,opacity;
}
.meteor:nth-of-type(1){top:12%;left:75%;animation-delay:0s}
.meteor:nth-of-type(2){top:50%;left:85%;animation-delay:2.4s}
.meteor:nth-of-type(3){top:78%;left:70%;animation-delay:4.8s}
@keyframes meteor{
  0%{opacity:0;transform:translate(220px,-220px) rotate(135deg) scale(1)}
  10%{opacity:1;transform:translate(0,0) rotate(135deg) scale(1.05)}
  85%{opacity:.7;transform:translate(-480px,480px) rotate(135deg) scale(0.95)}
  100%{opacity:0;transform:translate(-620px,620px) rotate(135deg) scale(0.9)}
}

/* ========== HERO ========== */
.hero{ text-align:center; margin-bottom:24px }
.title{
  font-weight:800; letter-spacing:.16em; font-size:clamp(28px,6vw,48px);
  text-shadow:0 0 20px #aab4ff2e, 0 0 2px #ffffff50;
}
.subtitle{
  color:var(--muted); letter-spacing:.12em; font-size:clamp(12px,2vw,14px);
  margin-top:2px; text-transform:uppercase;
}
.catch{
  color:var(--gold); font-style:italic; margin:16px auto 18px;
  text-shadow:0 0 18px #ffd76f40; animation:glow 5s ease-in-out infinite alternate;
}
@keyframes glow{0%{opacity:.82;text-shadow:0 0 10px #ffd76f66}100%{opacity:1;text-shadow:0 0 25px #fff8}}

.cta{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;margin:10px 0 8px}
.btn{
  display:inline-flex;align-items:center;justify-content:center;gap:.5em;
  padding:.7rem 1.1rem;border-radius:12px;text-decoration:none;font-size:14px;
  color:var(--ink); border:1px solid #9cc7ff3d; background:rgba(16,26,56,.45);
  backdrop-filter:blur(6px); transition:transform .15s, box-shadow .2s, background .2s;
}
.btn:hover{ transform:translateY(-1px); box-shadow:0 8px 20px #0005 }
.btn.gold{ background:linear-gradient(180deg,#ffe18f,#d4af37); color:#1a1333; font-weight:700; border-color:#d4af37 }
.btn.outline{ background:transparent }

/* ========== TRINITY ========== */
.trinity{
  --size: min(76vw, 560px); /* ビューに応じて自動縮尺 */
  --radius: calc(var(--size) * 0.38); /* ノード半径（中心からの距離） */
  position:relative; width:var(--size); aspect-ratio:1; margin:20px auto 18px;
}

/* 回転円環（ハロ） */
.halo{
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  width:92%; aspect-ratio:1; border-radius:50%;
  background:
    conic-gradient(from 0deg,
      rgba(255,215,111,.00),
      rgba(255,215,111,.35) 12%,
      rgba(255,215,111,.00) 24%,
      rgba(180,210,255,.30) 36%,
      rgba(255,215,111,.00) 48%,
      rgba(180,210,255,.28) 60%,
      rgba(255,215,111,.00) 72%,
      rgba(255,215,111,.35) 84%,
      rgba(255,215,111,.00) 100%);
  filter:blur(0.6px) drop-shadow(0 0 12px rgba(255,215,111,.45));
  /* 中抜き（リング化） */
  -webkit-mask:
    radial-gradient(closest-side, transparent 64%, #000 65%);
          mask:
    radial-gradient(closest-side, transparent 64%, #000 65%);
  animation:spin 22s linear infinite;
}
@keyframes spin{ to{ transform:translate(-50%,-50%) rotate(360deg) } }

/* コア（神々しい中心） */
.core{
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  width:70%; aspect-ratio:1; border-radius:50%;
  background:
    radial-gradient(circle at 50% 40%, rgba(255,230,160,.9), rgba(255,215,111,.35) 48%, rgba(255,215,111,.08) 68%, transparent 72%),
    radial-gradient(closest-side, rgba(255,255,255,.35), transparent 70%);
  box-shadow:
    0 0 28px rgba(255,215,111,.35),
    inset 0 0 24px rgba(255,255,255,.28);
}

/* 星砂（粒子の輪） */
.stardust{
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  width:86%; aspect-ratio:1; border-radius:50%;
  background:
    radial-gradient(1.5px 1.5px at 10% 40%, #fff9 0, transparent 55%),
    radial-gradient(1.2px 1.2px at 78% 65%, #fff7 0, transparent 55%),
    radial-gradient(1px 1px at 56% 20%, #fff6 0, transparent 55%),
    radial-gradient(1px 1px at 28% 78%, #fff6 0, transparent 55%);
  -webkit-mask: radial-gradient(closest-side, transparent 52%, #000 53%, #000 72%, transparent 73%);
          mask: radial-gradient(closest-side, transparent 52%, #000 53%, #000 72%, transparent 73%);
  opacity:.8; animation:dust 14s ease-in-out infinite alternate;
}
@keyframes dust{
  0%{ filter:blur(.0px); transform:translate(-50%,-50%) rotate(0deg) }
  100%{ filter:blur(.3px); transform:translate(-50%,-50%) rotate(12deg) }
}

/* 三位一体ノード（極座標で厳密三角） */
.node{
  --angle: 0deg; /* inlineで与える */
  position:absolute; left:50%; top:50%;
  transform:
    rotate(var(--angle))
    translate(var(--radius))
    rotate(calc(-1 * var(--angle)));
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  min-width:86px; padding:.6rem .9rem; border-radius:14px;
  background:linear-gradient(180deg,#212a58cc,#12183dcc);
  border:1px solid #9cc7ff3d; box-shadow:0 10px 24px #0005;
  backdrop-filter:blur(6px);
  text-align:center;
}
.node .kanji{ font-size:26px; letter-spacing:.06em; text-shadow:0 2px 12px #0008 }
.node .roma{ font-size:12px; color:#cbd7ff; letter-spacing:.08em; opacity:.95 }

/* 役割ごとの色ニュアンス（微差） */
.poem{    background:linear-gradient(180deg,#272f66cc,#141a44cc) }
.resonance{background:linear-gradient(180deg,#23365ccc,#111a3dcc) }
.prayer{  background:linear-gradient(180deg,#2a2f5ecc,#151947cc) }

/* バナー（神秘グラデ） */
.trinity-banner{
  position:absolute; left:50%; bottom:-46px; transform:translateX(-50%);
  padding:.5rem 1rem; border-radius:999px;
  border:1px solid #ffffff24;
  background:linear-gradient(90deg, rgba(138,168,255,.28), rgba(255,215,111,.28));
  color:#e8ecff; font-size:13px; letter-spacing:.08em;
  backdrop-filter:blur(6px);
}

/* ========== BOOK LIST（2列固定） ========== */
.booklist{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
  margin: 32px auto 0;
  max-width: 760px;
}
.book-btn{
  display:flex; align-items:center; justify-content:center; gap:.6em;
  width:100%; padding:.85rem .9rem; border-radius:12px; text-decoration:none;
  font-size:14px; color:var(--ink);
  border:1px solid #9cc7ff2d;
  background:linear-gradient(180deg,#1a2148cc,#0d1333cc);
  backdrop-filter:blur(6px);
  transition:transform .15s, box-shadow .2s, background .2s;
}
.book-btn:hover{ transform:translateY(-1px); box-shadow:0 8px 20px #0005 }
.book-btn .ico{ font-size:15px; opacity:.92 }

/* ========== FOOTER ========== */
.foot{ text-align:center; color:var(--muted); font-size:13px; margin:46px 0 30px }
.mini-links{ margin-top:10px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap }
.mini-links a{ color:#c7d8ff; text-decoration:none; border-bottom:1px dashed #c7d8ff73 }
.mini-links a:hover{ color:#fff }

/* ========== Responsive / A11y ========== */
@media (max-width: 400px){
  .booklist{ grid-template-columns: 1fr; } /* 超狭幅のみ1列 */
}
@media (max-width: var(--bp)){
  .meteor{ display:none } /* 端末省電力 */
}
@media (prefers-reduced-motion: reduce){
  .meteor, .halo, .stardust, body::before, body::after{ animation:none !important; opacity:.95 }
}
